---
title: 'Moving data between university HPCs'
date: 2024-01-06
permalink: /posts/2024/01/blog-post-4/
tags:
  - Visual Illusion 
  - Apparent Motion
  - Python
---

I'm going to show you how to make your own four-stroke apparent motion demo (aka the reverse-phi illusion)!

"What on earth is two-stroke apparent motion?" I hear you say. 

It's this mind melting (and, after staring for a while, potentially stomach churning!) effect:  

![](../../../../images/f1_headache.mp4)

What's amazing is that this effect is generated by presenting just two (!) images again and again (so the illusion lasts more than just a few milliseconds &#128526;) and inverting their luminance profiles with each repetition (hence four-stroke, since its essentilly a four-image sequence). Thats all it takes... kinda crazy! 

I won't go into the specifics of why this gives rise to the perception of never-ending motion, but it relates to my [previous post](2023-05-15-blog-post-3)on motion energy filtering and there are several [interesting](https://www.sciencedirect.com/science/article/pii/S0042698998001916) [papers](https://journals.sagepub.com/doi/abs/10.1068/p150627) on the topic (if you're familiar with motion energy filtering then Figure 1 of the paper by Mather & Murdoch should be rather intuitive!). 

So how can you make your own version of this effect? First you need to go find a gif that contains interesting motion! The one I used for the demo above looked like this: 

![](../../../../images/f1.png)

Then, it turns out that you can open gifs in preview (sorry non-mac users, I'm sure there is a very simple windows equivalent... but I'm not going to google it) to get to the individual frames. Having done so, all you need to do is pick two sequential (or there abouts...) frames from your gif, where there is a lot of interesting motion happening. Export the two frames as images (.tiff is fine), naming the first 'img1' and the second 'img2'. 

(Note, I also desaturated the images in preview... you don't strictly have to do this, but if you don't then be warned that things will look kinda hectic when you invert the image color profiles!)

Finally, here's the code I used to generate the demo (which you can easily run too, so long as you have psychopy installed). 

```
from psychopy import visual, core

# create a window
mywin = visual.Window(fullscr = False, size = (800,800), units = 'pix', screen = 1)

im1 = visual.ImageStim(mywin, image='img1', size = 800)
im2 = visual.ImageStim(mywin, image='img2', size = 800)

for i in range(50):
    
    for i in range(3):
        im1.draw()   
        mywin.flip()
        mywin.getMovieFrame(buffer='front')
        
    for i in range(3):
        im2.draw()   
        mywin.flip()
        mywin.getMovieFrame(buffer='front')

    im1.color *= -1 
    im2.color *= -1

mywin.saveMovieFrames(fileName='f1_headache.mp4', fps = 60) # save movie

mywin.close()
core.quit()

```

There are obviously myriad other ways you can achieve the same ends, but here's the essential steps: 1) You need to load the images, 2) present them for a few frames (I chose 3 arbitrarily, so that the demo wasn't just a rapid flicker), 3) invert the luminance/colour profiles every cycle, and 4) keep repeating this process for as long as you want. Oh and you also need a way of saving the frame buffer with each screen refresh and then stitching the frames together at the end. That's it! 

If you've actually bothered to follow these steps and make your demo then please feel free to send it my way - I'd love to see it! 

There are also some interesting follow up ideas which you (or future me!?) might consider playing with. For example, simple edge-detection filtering could be used to find salient edges (essentially as regions of interest) which can then be slightly offset and contrast reversed... like local four-stroke apparent motion sequences within an image. That might be a cool way of making stationary images appear to move in interesting ways? And may make the image look slightly less &#x1f92e;-inducing (since you might not have to contrast reverse everything?). Who knows... 

If you're reading this and have been bothered to implement that, then I guess you now know... so please enlighten me! 
 
![](../../../../images/infinite_homer.mp4)





